<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Allocated Status</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0px;
      background-color: #f3e5f5;
    }

    h2 {
      text-align: center;
      color: white;
    }

    table {
      width: 65%;
      border-collapse: collapse;
      margin-bottom: 20px;
      margin-top: 5%;
      margin-left: 20%;
    }

    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    th {
      background-color: #4285f4;
      color: white;
    }

    .accept {
      margin-top: 10%;
      text-align: center;
    }

    .status-button1 {
  display: inline-block; /* Display cancel button inline */
  width: 10%; /* Adjust button width */
  padding: 10px;
  background-color: #1976d2;
  color: #fff;
  border: none;
  cursor: pointer;
  border-radius: 25px;
  margin-top: 5%;
  margin-left: 15%; /* Adjust margin-left to create space between buttons */
  margin-bottom:4%;
}

.status-button {
  display: inline-block; /* Display allocate button inline */
  width: 10%; /* Adjust button width */
  padding: 10px;
  background-color: #1976d2;
  color: #fff;
  border: none;
  cursor: pointer;
  margin-left : 35%;
  border-radius: 25px;
  margin-top: 5%;
  margin-bottom :4%;
  }

    .status-button:hover{
      background-color: #1565c0;
    }
    .status-button1:hover{
      background-color: #1565c0;

    }
    .heading-container {
      background-image: url("static/picture.jpg");
      background-size: cover; /* Cover the entire background */
      background-repeat: no-repeat; /* Prevent background image from repeating */
      padding: 20px;
      text-align: center;
  }

    .status-button.no {
      background-color: #2ECC71;

      margin-top: -35px;
      width: 10%;
    }

    button {
      width: 15%;
    }


    td:first-child {
      width: 5%;  /* Adjust the width for the Sr No. column */
    }

    td:nth-child(2),
    td:nth-child(3) {
      width: 35%;  /* Adjust the width for Field and Value columns */
    }
    .desktop-logo {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 100px; /* Adjust width as needed */
      height: auto; /* Maintain aspect ratio */
      display: block;
  }
  .mobile-logo{
    display: none;
  }

.nav-links {
  position: absolute;
  top: 10px;
  right: 10px;
  display: flex;
  align-items: center;
}
.nav-links a {
  margin-left: 20px;
  color: white;
  text-decoration: none;
}
.nav-links a:hover {
  text-decoration: underline;
}
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
  right: 0;
}
.dropdown:hover .dropdown-content {
  display: block;
}
.dropdown-content a {
  color: blue; /* Change color to blue */
  display: block;
  padding: 10px;
  text-decoration: none;
}
.dropdown-content a:hover {
  background-color: #f0f0f0; /* Hover background color */
}
.form-container {
  margin-top: 20px; /* Adjust margin-top */
  max-width: 400px;
  margin-left: auto; /* Center horizontally */
  margin-right: auto; /* Center horizontally */
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 10px;
  background-color: #e0e0e0;
  position: relative;
}
#table-container {
  display: none;
}
#siteId{
  margin-left: 20%;
}
#submit1{
  background-color: #1976d2;
  color: #fff;
  border: none;
  cursor: pointer;
  margin-top:5%;
    margin-left: 30%;
    border-radius: 25px;
    display: block;
    width: 23%;
    padding: 10px;
    border-radius: 25px;
}
.web-heading {
  display: block; /* Display h2 on web */
}
.mobile-heading {
  display: none; /* Hide h4 on web */
}
@media screen and (max-width: 600px) {
  .heading-container {
    background-image: none; /* Remove background image */
  }
  .web-heading {
    display: none; /* Hide h2 on mobile */
  }
  .mobile-heading {
    display: block; /* Display h4 on mobile */
  }

  .status-button{
    margin-left: 25%;
  }

  .status-button1 {
    margin-left: 5%; /* Add margin-left for spacing between buttons */
  }

.status-button,
.status-button1 {
display: inline-block; /* Display buttons inline */
width: 25%; /* Adjust button width */
padding: 10px;
background-color: #1976d2;
color: #fff;
border: none;
cursor: pointer;
border-radius: 25px;
margin-top: 5%;
}


  .form-container {
    text-align: center; /* Align form elements to the center */
  }

  .table-container {
    text-align: center; /* Align table to the center */
    margin-top: 20px; /* Adjust margin-top */
  }

  table {
    margin: 0 auto; /* Center the table horizontally */
  }
<!--  .status-button,-->
<!--  .status-button1 {-->
<!--    display: inline-block; /* Display buttons inline */-->
<!--    width: 25%; /* Adjust button width */-->
<!--    padding: 10px;-->
<!--    background-color: #1976d2;-->
<!--    color: #fff;-->
<!--    border: none;-->
<!--    cursor: pointer;-->
<!--    margin-left:20%;-->
<!--    border-radius: 25px;-->
<!--    margin-top: 5%;-->
<!--  }-->

  button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    background-color: #1976d2;
    color: #333333;
    border: none;
    border-radius: 25px;
    display: inline-block; /* Display as inline-block */
    width: auto; /* Adjust width automatically */
    margin: 10px; /* Adjust margin as needed */
    margin-top: 10%; /* Adjust margin-top as needed */
    margin-left: 15%; /* Center the button horizontally */
  }
  .web-heading {
    display: none; /* Hide h2 on mobile */
  }
  .mobile-heading {
    display: block; /* Display h4 on mobile */
    font-family: sans-serif;
    font-size: 25px; /* Adjust font size as needed */
    font-weight: bold;
    display: inline-block;
    padding: 5px 10px;
    border-radius: 10px;
    animation: back 20s linear infinite;
    margin-top: 15%;
    margin-left: 12%;
  }
  .heading-container {
    background-image: none;
    background-color: #0D47A1;
    padding: 0px;
    text-align: center;
    margin-bottom: 10px;
    position: relative;
}
.mobile-logo {
  display: block;
  position: absolute;
  top: 5px;
  left: 10px;
  width: 75px; /* Adjust width as needed */
  height: auto; /* Maintain aspect ratio */
}
.desktop-logo{
  display: none;
}

  .mobile-heading::before {
    content: attr(REFL-TEXT);
    position: absolute;
    top: 0;
    left: 0;
    transform: rotateX(180deg);
    line-height: 40px;
  }
  h4{
    color: white;
  }

  button span.arrow-icon {
    vertical-align: middle; /* Align the arrow icon vertically */
<!--    margin-left: 5px; /* Adjust margin as needed */-->
  }
  button::after {
    content: '\00a0'; /* Add some space after button text */
  }
}
  </style>
</head>
<body>
  <div class="heading-container">
    <img src=" static/logo_light.png" alt="Desktop Logo" class="desktop-logo">
    <img src="static/logotry.png" alt="Mobile Logo" class="mobile-logo">
    <h2 class="web-heading">Allocated Status</h2>
    <h4 class="mobile-heading">Allocated Status</h4>
  </div>

  <div class="all">
        <div class="nav-links">
            <div class="dropdown" onclick="toggleActivityDropdown()">
<!--                <a href="#" class="dropbtn">Activity</a>-->
                <!-- Adding sub-options under "Activity" -->
                <div class="dropdown-content" id="activityDropdownContent">
<!--                    <a href="/AllocatedStatus.html">Task Allocation</a>-->
<!--                    <a href="/usertaskStatus">Task Status</a>-->
                </div>
            </div>
            <div class="dropdown" onclick="toggleProfileDropdown()">
                <a href="#" class="dropbtn">Profile</a>
                <div class="dropdown-content" id="profileDropdownContent">
                    <a href="/Userdetails">My Details</a>
                    <a href="/request_reset_password">Change Password</a>
                    <a href="/welcome">Logout</a>
                </div>
            </div>
        </div>
    </div>

  <div class="form-container">
    <form id="siteForm" method="POST" action="/AllocatedStatus.html">
        <label for="siteId">Select Site ID:</label>
        <select id="siteId" class="dropdown">
            <option value="Select Circle">Select Site ID</option>
            {% for site_code in site_codes %}
            <option value="{{ site_code }}">{{ site_code }}</option>
            {% endfor %}
        </select>

       <p class="error-message" id="errorMessage" color="red " style="display: none; color:red;">Please select the site ID </p>

        <button type="button" id="submit1" onclick="displayTable()">Submit</button>
    </form>
  </div>

  <div class="table-container" id="table-container">
    <table id="dataTable">
      <thead>
        <tr>
          <th>Sr No.</th>
          <th>Field</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        <!-- Data will be added dynamically here -->
      </tbody>
    </table>
  </div>
  <button id="acceptButton" class="status-button" style="display: none;" onclick="acceptAction()">Accept</button>

  <!-- Cancel button -->
  <button id="cancelButton" class="status-button1" style="display: none;" onclick="cancelAction()">Cancel</button>

  <script>



    function displayTable() {
          var siteId = document.getElementById("siteId").value;

        if (siteId === "Select Circle") {
                // Display error message
                document.getElementById("errorMessage").style.display = "block";
                // Prevent form submission
                event.preventDefault();
            } else {
                // Hide error message if site ID is selected
                document.getElementById("errorMessage").style.display = "none";
                // Allow form submission
                // Optionally, you can remove this line to allow default form submission behavior
                // event.preventDefault();
            }

          if (siteId !== "Select Circle") {
            fetch('/AllocatedStatus.html', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
              },
              body: new URLSearchParams({ 'siteId': siteId })
            })
            .then(response => response.json())
            .then(data => {
              console.log('Data received:', data); // Log the received data
              var tableBody = document.getElementById("tableBody");
              tableBody.innerHTML = ''; // Clear existing rows

              var rowCount = 0;
              for (var field in data) {
                rowCount++;
                tableBody.innerHTML += `
                  <tr>
                    <td>${rowCount}</td>
                    <td>${field}</td>
                    <td>${data[field]}</td>
                  </tr>
                `;
              }

              // Show the table container
              document.getElementById("table-container").style.display = "block";

              // Show the buttons
              document.getElementById("acceptButton").style.display = "inline-block";
              document.getElementById("cancelButton").style.display = "inline-block";
            })
            .catch(error => console.error('Error fetching data:', error));
          } else {
        <!--    alert("Please select a Site ID.");-->
          }
        }

    function acceptAction() {
      window.location.href = "presectorselectionpage.html";
    }

    function cancelAction() {
      window.location.href = "nooption.html";
    }
    function toggleActivityDropdown() {
      var activityDropdownContent = document.getElementById("activityDropdownContent");
      var profileDropdownContent = document.getElementById("profileDropdownContent");
      if (activityDropdownContent.style.display === "block") {
          activityDropdownContent.style.display = "none";
      } else {
          activityDropdownContent.style.display = "block";
          // Close profile dropdown if it's open
          profileDropdownContent.style.display = "none";
      }
  }

  function toggleProfileDropdown() {
      var profileDropdownContent = document.getElementById("profileDropdownContent");
      var activityDropdownContent = document.getElementById("activityDropdownContent");
      if (profileDropdownContent.style.display === "block") {
          profileDropdownContent.style.display = "none";
      } else {
          profileDropdownContent.style.display = "block";
          // Close activity dropdown if it's open
          activityDropdownContent.style.display = "none";
      }
  }

  </script>
</body>
</html>